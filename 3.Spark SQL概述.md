# 3.Spark SQL概述

## 1.Spark SQL前世今生

- 为什么要使用sql？
    1. 事实上的标准
    2. 易学易用
    3. 受众面大
    
- Hive
类似于sql的hive sql语句，sql==>mapreduce
缺点：基于mapreduce，执行效率比较低
改进：hive on tez，hive on spark，hive on mapreduce

    
- Shark
hive on spark ==> shark（把hive解析后的作业翻译成spark作业）
优点：1.基于spark；2.基于内存的列式存储；3.与hive能够兼容
缺点：hive ql 的解析、逻辑执行计划生成、执行计划的优化是依赖于hive的。仅仅只是把物理执行计划从mr作业替换成spark；mapreduce基于进程级别的，而spark是基于线程的，shark必须单独维护一个分支来处理线程相关的操作。

![image.png](https://upload-images.jianshu.io/upload_images/7220971-d1d24ec90c379222.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

Shark终止后，产生了两个分支：
    1. Hive on spark（Hive社区中，源码是在hive中）
    2. spark sql（Spark社区，源码是在Spark中）（支持多种数据源，多种优化技术，扩展性也要好很多）

    
    
